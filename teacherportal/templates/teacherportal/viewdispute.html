{% extends "teacherportal/base.html" %}

{% block content %}
    {% if error %}
    <br><br>
    <div class="row justify-content-center">
        <h4 class="centred error">{{error}}</h4>
    </div>
    {% else %}
    <br><br>
        <form style="border: 0;" method="POST" href="#">
            <div class="row justify-content-center">
            <div class="my-auto">
                <h4 class="center-to-button">Dispute Thread</h4><br>
            </div>
            {% csrf_token %}
            {% if dispute.status %}
            <button type="submit" class="dbtn left-align" name="close">Close</button>
            {% endif %}
        </div>
        </form>
    <div class="row justify-content-center">
        <ul class="list-group-flush">
            {% for item in responses %}
            <div style="border-radius: 8px; border: 1px solid #444; margin:1em;">
                <div class="justify-content-left">
                    <h5 class="mb-1" style="padding: 10px 10px;">{{item.displayName}}</h5>
                </div>
                <p class="mb-1" style="padding-top: 0px; padding-bottom: 10px; padding-left: 25px; padding-right: 25px;">{{item.content}}</p>
            </div>  
            {% endfor %}
            <li class="list-group-item"></li>
        </ul>
    </div>
    {% if dispute.status %}
        <form action="#" method="POST" class="w-25" style="border: 0px solid;">
            {% csrf_token %}
                <div class="form-group col-md-12 col-md-offset-4">
                    {{ form.as_p }}
                </div>
            <div class="text-center">
                <button type="submit" class="bbtn" name="submitbtn">Post</button>
            </div>
            
            <div></div>
        </form>
    {% else %}
    <div class="row justify-content-center">
        <div class="my-auto">
            <h4 class="center-to-button">This dispute is closed.</h4><br>
        </div>
    </div>
    {% endif %}

    {% endif %}
{% endblock content %}